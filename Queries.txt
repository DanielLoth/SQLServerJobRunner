declare @GroupId uniqueidentifier;
declare @GroupDatabaseId uniqueidentifier;

select @GroupId = group_id, @GroupDatabaseId = group_database_id from sys.availability_databases_cluster where database_name = db_name();
select * from sys.availability_databases_cluster where database_name = db_name();
select * from sys.availability_replicas where group_id = @GroupId;
select * from sys.dm_hadr_database_replica_states where database_id = db_id(db_name()) /* group_id = @GroupId and group_database_id = @GroupDatabaseId */ option (recompile);

--select * from sys.dm_exec_describe_first_result_set('select * from sys.dm_hadr_database_replica_states;', null, null);

--exec sp_helptext 'sys.fn_hadr_is_primary_replica';


